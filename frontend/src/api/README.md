# Frontend API Layer

–î–∞–Ω–Ω—ã–π —Å–ª–æ–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å backend API —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ–º –¥–≤–µ—Ä–µ–π.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

- `client.ts` - –ë–∞–∑–æ–≤—ã–π HTTP –∫–ª–∏–µ–Ω—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ axios —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∏ –∏–Ω—Ç–µ—Ä—Ü–µ–ø—Ç–æ—Ä–∞–º–∏
- `auth.ts` - API –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- `orders.ts` - API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞—è–≤–∫–∞–º–∏
- `customers.ts` - API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- `users.ts` - API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- `stages.ts` - API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —ç—Ç–∞–ø–∞–º–∏ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
- `files.ts` - API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏
- `comments.ts` - API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
- `notifications.ts` - API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- `index.ts` - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç

```typescript
import { authApi, ordersApi, customersApi } from '../api';
```

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

```typescript
// –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
try {
  await authApi.login('user@example.com', 'password');
  // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, —Ç–æ–∫–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
} catch (error) {
  console.error('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:', error.message);
}

// –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
await authApi.logout();
```

### –†–∞–±–æ—Ç–∞ —Å –∑–∞—è–≤–∫–∞–º–∏

```typescript
// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞—è–≤–æ–∫
const orders = await ordersApi.findAll({
  page: 1,
  limit: 10,
  status: 'IN_PROGRESS'
});

// –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞—è–≤–∫–∏
const newOrder = await ordersApi.create({
  orderNumber: 'ORD-001',
  title: '–ù–æ–≤—ã–π –∑–∞–∫–∞–∑',
  customerId: 'customer-id',
  managerId: 'manager-id',
  priority: 'HIGH'
});

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏
const updatedOrder = await ordersApi.update(orderId, {
  status: 'COMPLETED'
});
```

### –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏

```typescript
// –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
const file = await filesApi.upload(selectedFile, {
  orderId: 'order-id',
  type: 'DOCUMENT',
  visibility: 'INTERNAL',
  description: '–ß–µ—Ä—Ç–µ–∂ –¥–≤–µ—Ä–∏'
});

// –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
await filesApi.download(fileId, 'door-drawing.pdf');
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API URL —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local` –≤ –∫–æ—Ä–Ω–µ frontend –ø—Ä–æ–µ–∫—Ç–∞:

```
NEXT_PUBLIC_API_URL=http://localhost:3001/api
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í—Å–µ API —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–±—Ä–∞—Å—ã–≤–∞—é—Ç –æ—à–∏–±–∫–∏ —Å —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:

```typescript
interface ApiError {
  message: string;
  status: number;
  errors?: Record<string, string[]>;
}
```

–ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫:

```typescript
try {
  const order = await ordersApi.findOne(orderId);
} catch (error) {
  if (error.status === 404) {
    console.log('–ó–∞—è–≤–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞');
  } else if (error.status === 403) {
    console.log('–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—è–≤–∫–µ');
  } else {
    console.error('–û—à–∏–±–∫–∞:', error.message);
  }
}
```

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Å—Ç–µ—á–µ–Ω–∏–µ access —Ç–æ–∫–µ–Ω–∞:

1. –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ 401 –æ—à–∏–±–∫–∏ –ø—ã—Ç–∞–µ—Ç—Å—è –æ–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ refresh token
2. –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å
3. –ü—Ä–∏ –Ω–µ—É–¥–∞—á–µ –æ—á–∏—â–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞

## –¢–∏–ø–∏–∑–∞—Ü–∏—è

–í—Å–µ API —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º TypeScript:

```typescript
// –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è
const order: Order = await ordersApi.findOne(orderId);
const customers: PaginatedResponse<Customer> = await customersApi.findAll();
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å:

```
üöÄ API Request: GET /orders?page=1&limit=10
‚úÖ API Response: GET /orders?page=1&limit=10 { status: 200, data: [...] }
‚ùå API Error: POST /auth/login { status: 401, message: '–ù–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ' }